##     动态分片之均流调度器

```js
并发总量为`K`，正在执行的任务有`n`个，要求最多同时执行`N`个任务,剩下`M`个任务。（潜在条件：`0 <= n <= K <= N`）
简化：
if(n = N) return;//已经榨干带宽了。
if(M > 0){
  min(N - max(n, K), M)  //基于之前 `n` 个任务基础上，从`M` 个任务中取出 `min(N - max(n,K),M)` 个任务加入工作池，对工作池 '循环式' 分配`N-K` 个分片
}else{
 //n个工作池中的任务 '循环式' 分配 `N-K` 个分片
}
```

## 动态分片流程设计

![image.png](https://s2.loli.net/2025/12/26/piylbRJYK1q5zvo.png)

```js
核心思想：调度器主动/被动分配若干块，包含若干任务，每个任务执行完毕要通知调度器，继续去分配若干块....

拓展：结合以上的均流调度、图片压缩结合并发内存考等。
```

