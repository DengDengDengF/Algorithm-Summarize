# 1.前端处理

```js
一、上传前暴力去除
1.set存md5 重复校验后去掉，会有 Elmessage 多次提示
2.删除文件后，set中对应的md5也要删除

二、任意过程，留存在上传列表
1.md5校验重复后，推入失败列表，状态notAllowUpload:true,行文字提示重复 和 云视频系统设置配置后的提示重复 有狭义？
2.删除后
   2.1 剩余的重复md5实例 > 0,删除项相同的实例中的第一个，状态notAllowUpload:false，并修改提示
   2.2 剩余的重复md5实例 = 0,set中对应的md5也要删除
3.notAllowUpload是true就不允许上传，否则允许

'!!'因前端只能影响用户单机，依然会出现以下问题`!!`
1.用户A 上传hash：123456
2.用户B 上传hash：123456
多个单机系统，同时并发上传，相同md5文件依然会上传到云视频，`使得以上方案实现与否没区别！`

问的ai：百度网盘、Google Drive,这些大厂采用的是让后端做主导的方式
```



# 2.后端处理

```js
问的ai：分布式锁，抢到锁的负责写入，没抢到的就等待
可以保证，写入只有一次，之后全是秒传

达到效果：`前端只管传，第一次上传状态下的去重/秒传，后端判断`

```

